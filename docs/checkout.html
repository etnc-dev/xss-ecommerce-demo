<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MAGAYONESHUBHACKS DEMO</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">XSS Shop</a>
    <form class="d-flex" action="/search" method="get">
      <input class="form-control me-2" type="search" name="q" placeholder="Search">
      <button class="btn btn-outline-light" type="submit">Search</button>
    </form>
  </div>
</nav>

<div class="container">
  <h2>Checkout</h2>
<p>
  This page demonstrates <strong>DOM-based XSS</strong> using URL parameters.
</p>

<div id="checkout-message" class="alert alert-info">
  Default message: Ready to checkout.
</div>

<p class="mt-4">
  Try visiting this page with a <code>msg</code> query parameter:
</p>
<code>
  /checkout?msg=&lt;script&gt;alert('DOM XSS!')&lt;/script&gt;
</code>

<script>
// VULNERABLE DOM XSS: directly injects URL parameter into innerHTML
function getParam(name) {
  const params = new URLSearchParams(window.location.search);
  return params.get(name);
}

const msg = getParam('msg');
if (msg) {
  // This is intentionally unsafe:
  document.getElementById('checkout-message').innerHTML =
    'Message from URL: ' + msg;
}
</script>

</div>

</body>
</html>
